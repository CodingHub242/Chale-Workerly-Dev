<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title style="color:whitesmoke;">My Dashboard</ion-title>
     <ion-buttons slot="end">
      <ion-button>
        <ion-icon name="person"></ion-icon>
        <span style="margin-top:4px;margin-left: 10px;">{{ currentUser?.firstName }}</span>
      </ion-button>
      <ion-button (click)="logout()">
        <ion-icon name="log-out"></ion-icon>
        <span style="margin-top:2px;margin-left: 3px;">Logout</span>
      </ion-button>

      
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <ion-chip [color]="getApprovalStatusColor(currentUser?.approvalStatus)" class="approval-chip">
    <ion-icon name="checkmark-circle" *ngIf="currentUser?.approvalStatus === 'approved'"></ion-icon>
    <ion-icon name="close-circle" *ngIf="currentUser?.approvalStatus === 'declined'"></ion-icon>
    <ion-icon name="time" *ngIf="currentUser?.approvalStatus === 'pending' || !currentUser?.approvalStatus"></ion-icon>
    <ion-label>Your Account Status: {{ getApprovalStatusText(currentUser?.approvalStatus) }}</ion-label>
  </ion-chip>
  <ion-grid class="dashboard-grid">
    <ion-row style="margin-top: -40px;">
      <!-- Worker Overview for Temp -->
      <ion-col size="12">
        <ion-card class="list-card">
          <ion-card-header>
            <ion-card-title>My Work Overview</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <div class="worker-list">
              <div class="worker-header">
                <div class="title-buttons">
                  <h4>Your current shifts and work status...</h4>
                  <ion-button fill="clear" routerLink="/shifts" style="color:orange;">
                    View All Shifts
                    <ion-icon name="chevron-forward-outline" slot="end"></ion-icon>
                  </ion-button>
                </div>
              </div>

              <ion-segment [(ngModel)]="selectedTab" mode="ios" color="primary">
                <ion-segment-button value="working">
                  <ion-label>
                    <ion-icon name="play-circle-outline"></ion-icon>
                    Working
                  </ion-label>
                </ion-segment-button>
                <ion-segment-button value="pending">
                  <ion-label>
                    <ion-icon name="time-outline"></ion-icon>
                    Pending
                  </ion-label>
                </ion-segment-button>
              </ion-segment>

              <div class="tab-content" [ngClass]="selectedTab">
                <!-- Working Tab Content -->
                <ion-list *ngIf="selectedTab === 'working'" class="status-section">
                  <ion-item *ngFor="let shift of getShiftsByStatus('started')">
                    <ion-label>
                      <h2>
                        <ion-icon name="briefcase-outline"></ion-icon>
                        {{ shift.job.title }}
                      </h2>
                      <p>
                        <ion-icon name="business-outline"></ion-icon>
                        {{ shift.client.name }}
                        <span class="status-started">
                          <ion-icon name="pulse-outline"></ion-icon>
                          Work Is Today
                        </span>
                        <span class="pay-rate">
                          <ion-icon name="cash-outline"></ion-icon>
                          {{ shift.job.payRate }}/day
                        </span>
                      </p>
                    </ion-label>
                  </ion-item>
                </ion-list>

                <!-- Pending Tab Content -->
                <ion-list *ngIf="selectedTab === 'pending'" class="status-section">
                  <ion-item *ngFor="let shift of getShiftsByStatus('pending')">
                    <ion-label>
                      <h2>
                        <ion-icon name="briefcase-outline"></ion-icon>
                        {{ shift.job.title }}
                      </h2>
                      <p>
                        <ion-icon name="business-outline"></ion-icon>
                        {{ shift.client.name }}
                        <span class="status-pending">
                          <ion-icon name="hourglass-outline"></ion-icon>
                          Pending
                        </span>
                      </p>
                    </ion-label>
                  </ion-item>
                </ion-list>
              </div>
            </div>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row>
      <!-- Completed Shifts Stat Card -->
      <ion-col size="12" size-md="6" size-lg="6">
        <div class="stat-card shifts-gradient">
          <div class="stat-content">
            <div class="stat-header">
              <div class="stat-icon shifts-icon">
                <ion-icon name="checkmark-circle-outline"></ion-icon>
              </div>
              <div class="trend-indicator positive">
                <ion-icon name="trending-up-outline"></ion-icon>
              </div>
            </div>
            <div class="stat-info">
              <h2>{{ completedShiftsCount }}</h2>
              <p>Completed Shifts</p>
            </div>
          </div>
        </div>
      </ion-col>

      <!-- Pending Shifts Stat Card -->
      <ion-col size="12" size-md="6" size-lg="6">
        <div class="stat-card temps-gradient">
          <div class="stat-content">
            <div class="stat-header">
              <div class="stat-icon temps-icon">
                <ion-icon name="time-outline"></ion-icon>
              </div>
              <div class="trend-indicator neutral">
                <ion-icon name="trending-up-outline"></ion-icon>
              </div>
            </div>
            <div class="stat-info">
              <h2>{{ pendingShiftsCount }}</h2>
              <p>Pending Shifts</p>
            </div>
          </div>
        </div>
      </ion-col>

      <!-- Approved Timesheets Stat Card -->
      <ion-col size="12" size-md="6" size-lg="6">
        <div class="stat-card timesheets-gradient">
          <div class="stat-content">
            <div class="stat-header">
              <div class="stat-icon timesheets-icon">
                <ion-icon name="checkmark-done-outline"></ion-icon>
              </div>
              <div class="trend-indicator positive">
                <ion-icon name="trending-up-outline"></ion-icon>
              </div>
            </div>
            <div class="stat-info">
              <h2>{{ approvedTimesheetsCount }}</h2>
              <p>Approved Timesheets</p>
            </div>
          </div>
        </div>
      </ion-col>

      <!-- Rejected Timesheets Stat Card -->
      <ion-col size="12" size-md="6" size-lg="6">
        <div class="stat-card clients-gradient">
          <div class="stat-content">
            <div class="stat-header">
              <div class="stat-icon clients-icon">
                <ion-icon name="close-circle-outline"></ion-icon>
              </div>
              <div class="trend-indicator neutral">
                <ion-icon name="trending-down-outline"></ion-icon>
              </div>
            </div>
            <div class="stat-info">
              <h2>{{ rejectedTimesheetsCount }}</h2>
              <p>Rejected Timesheets</p>
            </div>
          </div>
        </div>
      </ion-col>
    </ion-row>

    <ion-row>
      <!-- Bar Chart -->
      <ion-col size="12">
        <ion-card class="chart-card">
          <ion-card-header>
            <ion-card-title>My Shifts per Day</ion-card-title>
          </ion-card-header>
          <ion-card-content>
            <canvas #barChart></canvas>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    
  </ion-grid>
</ion-content>